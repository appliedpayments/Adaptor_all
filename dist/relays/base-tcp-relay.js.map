{"version":3,"file":"base-tcp-relay.js","sourceRoot":"","sources":["../../src/relays/base-tcp-relay.ts"],"names":[],"mappings":"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"}